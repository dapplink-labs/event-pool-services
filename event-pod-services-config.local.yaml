# Event Pod Services 配置文件示例
# 复制此文件为 config.yaml 并修改相关配置

# ============================================
# 数据库迁移配置
# ============================================
migrations: "./migrations"

# ============================================
# 主数据库配置（必填）
# ============================================
master_db:
  host: "localhost"           # 数据库地址
  port: 5432                  # PostgreSQL 端口
  name: "event_pod"  # 数据库名称（请修改为你的数据库名）
  user: "zp"            # 数据库用户名（请修改）
  password: "admin"   # 数据库密码（请修改）

# ============================================
# 从数据库配置（可选，读写分离）
# ============================================
#slave_db_enable: false
#slave_db:
#  host: "localhost"
#  port: 5432
#  name: "your_database_name"
#  user: "postgres"
#  password: "your_password"

# ============================================
# HTTP API 服务配置
# ============================================
http_server:
  host: "0.0.0.0"
  port: 8080

# ============================================
# gRPC 服务配置
# ============================================
rpc_server:
  host: "0.0.0.0"
  port: 9090

# ============================================
# WebSocket 服务配置
# ============================================
websocket_server:
  host: "0.0.0.0"
  port: 8081

# ============================================
# Metrics 监控服务配置
# ============================================
metrics_server:
  host: "0.0.0.0"
  port: 7300

# ============================================
# JWT 配置
# ============================================
jwt_secret: "CHANGE_THIS_TO_A_RANDOM_SECRET_KEY_IN_PRODUCTION"  # 请修改为随机字符串！

# ============================================
# CORS 跨域配置
# ============================================
cors_allowed_origins: "*"  # 生产环境建议指定具体域名，如 "https://yourdomain.com"

# ============================================
# 域名配置
# ============================================
domain: "localhost"

# ============================================
# 缓存配置
# ============================================
api_cache_enable: false
cache_config:
  list_size: 100
  detail_size: 1000
  list_expire_time: 300s
  detail_expire_time: 600s

# ============================================
# 邮件服务配置（可选）
# ============================================
email_config:
  smtp_host: "smtp.gmail.com"
  smtp_port: 587
  smtp_user: "your_email@gmail.com"
  smtp_password: "your_email_password"
  from_name: "Your Service Name"
  from_email: "your_email@gmail.com"
  use_ssl: true

# ============================================
# 短信服务配置（可选，阿里云）
# ============================================
sms_config:
  access_key_id: "your_access_key_id"
  access_key_secret: "your_access_key_secret"
  sign_name: "your_sign_name"
  template_code: "your_template_code"
  endpoint: "dysmsapi.aliyuncs.com"

# ============================================
# 七牛云存储配置（可选）
# ============================================
kodo_config:
  access_key: "your_qiniu_access_key"
  secret_key: "your_qiniu_secret_key"
  bucket: "your_bucket_name"
  domain: "your_cdn_domain.com"
  zone: "z0"  # z0=华东, z1=华北, z2=华南, na0=北美, as0=东南亚
  use_https: true
  use_cdn_domains: false

# ============================================
# AWS S3 存储配置（可选）
# ============================================
s3_config:
  access_key: "your_aws_access_key"
  secret_key: "your_aws_secret_key"
  bucket: "your_s3_bucket_name"
  region: "us-east-1"
  endpoint: ""  # 自定义endpoint（可选）
  cdn_domain: ""  # CDN域名（可选）
  use_path_style: false

# ============================================
# MinIO 存储配置（可选）
# ============================================
minio_config:
  endpoint: "localhost:9000"
  access_key_id: "your_minio_access_key"
  secret_access_key: "your_minio_secret_key"
  use_ssl: false
  bucket_name: "your_bucket_name"
  base_url: "http://localhost:9000"

# ============================================
# Elasticsearch 配置（可选）
# ============================================
elasticsearch_config:
  enable: false                     # 是否启用Elasticsearch
  addresses:                       # Elasticsearch节点地址列表
    - "http://localhost:9200"
  username: ""                     # 用户名（可选，如果ES需要认证）
  password: ""                     # 密码（可选，如果ES需要认证）
  cloud_id: ""                     # Elastic Cloud ID（可选，用于Elastic Cloud）
  api_key: ""                      # API Key（可选，用于API Key认证）
  service_token: ""                # Service Token（可选，用于Service Token认证）

# ============================================
# Redis 配置（可选）
# ============================================
redis:
  enable: false                    # 是否启用Redis
  addr: "127.0.0.1:6379"          # Redis服务器地址
  password: ""                     # Redis密码（如果有密码认证）
  db: 0                           # Redis数据库索引（0-15）
  pool_size: 200                  # 连接池大小
  min_idle: 50                    # 最小空闲连接数
  dial_timeout: 5s                # 连接超时时间
  read_timeout: 5s                # 读取超时时间
  write_timeout: 5s               # 写入超时时间

# ============================================
# 区块链 RPC 配置（可选）
# 用于区块链项目的以太坊节点配置
# ============================================
rpcs:
  - rpc_url: "https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID"
    chain_id: 1  # 1=Ethereum Mainnet, 5=Goerli, 11155111=Sepolia
    contracts:
      # 添加你的合约地址
      # your_contract_name: "0xYourContractAddress"

  # 可以配置多个链
  # - rpc_url: "https://polygon-rpc.com"
  #   chain_id: 137  # Polygon Mainnet
  #   contracts:
  #     your_contract: "0xYourContractAddress"

# ============================================
# 区块链相关配置（可选）
# ============================================
num_confirmations: 12                # 区块确认数
safe_abort_nonce_too_low_count: 3   # Nonce too low 重试次数
caller_address: "0xYourWalletAddress"  # 调用者地址
private_key: "your_private_key_hex_without_0x_prefix"  # 私钥（请妥善保管！）
